
<html lang="ru">
<head>
<meta charset="UTF-8" />
<title>Helix Jump Lite</title>
<style>
  canvas { background: #222; display: block; margin: 0 auto; }
</style>
</head>
<body>
<canvas id="gameCanvas" width="400" height="600"></canvas>
<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

let angle = 0;
const ringsCount = 12;
const ringRadius = 150;
const centerX = canvas.width/2;
const centerY = 200;

let ballY = 50;
let ballX = centerX;
let ballSpeedY = 2;
let ballPassedRings = [];

function drawRing(angleOffset) {
    ctx.save();
    ctx.translate(centerX, centerY);
    ctx.rotate(angleOffset);
    for (let i=0; i<ringsCount; i++) {
        ctx.beginPath();
        ctx.arc(0, 0, ringRadius + i*20, 0, Math.PI*2);
        ctx.strokeStyle = 'white';
        ctx.lineWidth=2;
        ctx.stroke();

        // Отверстия
        const holeAngle = Math.PI/6; // 30 градусов
        ctx.save();
        ctx.rotate(holeAngle);
        ctx.beginPath();
        ctx.arc(0, ringRadius + i*20, 10, 0, Math.PI*2);
        ctx.fillStyle='black';
        ctx.fill();
        ctx.restore();

        ctx.rotate(-holeAngle);
    }
    ctx.restore();
}

function drawBall() {
    ctx.beginPath();
    ctx.arc(ballX, ballY, 10, 0, Math.PI*2);
    ctx.fillStyle='red';
    ctx.fill();
}

function update() {
    angle += 0.01; // вращение колец
    ballY += ballSpeedY;

    // Проверка прохождения через кольца
    for (let i=0; i<ringsCount; i++) {
        const ringY = centerY + i*20;
        if (Math.abs(ballY - ringY) < ballSpeedY) {
            // Проверка отверстия
            const holeAngleDeg = Math.random() * 360; // случайное отверстие для каждого кольца
            const holeAngleRad = holeAngleDeg * Math.PI/180;

            // Проверка попадания мяча через отверстие
            const relativeBallX = ballX - centerX;
            const ringRotation = angle + i * Math.PI/6; // пример вращения
            const holeX = Math.cos(holeAngleRad + ringRotation) * ringRadius;
            const holeY = Math.sin(holeAngleRad + ringRotation) * ringRadius;

            if (Math.abs(relativeBallX - holeX) > 10) {
                // Мяч не прошел через отверстие — игра окончена или потеря жизни
                alert('Game Over!');
                document.location.reload();
                return;
            }
        }
    }

    if (ballY > canvas.height) {
        alert('Вы прошли уровень!');
        document.location.reload();
    }
}

function draw() {
    ctx.clearRect(0,0,canvas.width,canvas.height);
    drawRing(angle);
    drawBall();
}

function gameLoop() {
    update();
    draw();
    requestAnimationFrame(gameLoop);
}

// Управление мячом
canvas.addEventListener('click', () => {
    ballSpeedY = -5; // прыжок вверх при клике
});

gameLoop();
</script>
</body>
</html>